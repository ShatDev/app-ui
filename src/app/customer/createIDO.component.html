<header-strip></header-strip>

<main>
    <div style="text-align:center; font-size: 33px; line-height:33px; padding: 30px 0;" *ngIf="isWeb3Disabled">
        <a href="https://metamask.app.link/dapp/app.tosdis.finance/" target="_blank" style=" text-decoration:none">
            <img src="/assets/images/mm-logo.svg" />
            <br />
            <br />
            <span *ngIf="isMobile()">{{'Open in MetaMask App' | translate }}</span>
            <span *ngIf="!isMobile()">{{'Install MetaMask for your browser' | translate }}</span>
        </a>
    </div>
    <div class="main-title">
        <h1>Create your own IDO</h1>
    </div>
    <div style="text-align:center; padding: 30px 0;" *ngIf="isETHChain">
        <h2 style="color:#ff0000a3;">IDO platform enabled in BSC network!</h2>
    </div>
    <div class="create-pool">
        <div class="row">
            <div class="col-lg-6">
                <div class="create-box">
                    <div class="create-inner">
                        <span class="icon"><svg id="Layer_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g id="XMLID_1441_"><g id="XMLID_561_"><path id="XMLID_592_" d="m482 275.988h-10v-70c0-27.596-19.378-50.736-45.238-56.568l-45.515-78.834c-6.67-11.553-17.44-19.818-30.327-23.271-9.099-2.437-18.481-2.258-27.279.398l-33.096-33.097c-19.475-19.473-51.159-19.475-70.634 0l-133.37 133.372h-28.541c-31.981 0-58 26.019-58 58v248c0 31.981 26.019 58 58 58h133c5.522 0 10-4.478 10-10s-4.478-10-10-10h-133c-20.953 0-38-17.047-38-38v-248c0-20.953 17.047-38 38-38h356c20.953 0 38 17.047 38 38v70h-74c-29.775 0-54 24.225-54 54s24.225 54 54 54h74v70c0 20.953-17.047 38-38 38h-133c-5.522 0-10 4.478-10 10s4.478 10 10 10h133c31.981 0 58-26.019 58-58v-70h10c16.542 0 30-13.458 30-30v-48c0-16.541-13.458-30-30-30zm-136.256-209.354c7.726 2.07 14.184 7.025 18.183 13.952l38.915 67.402h-215.549l135.728-78.363c6.926-3.998 14.994-5.062 22.723-2.991zm-111.69-37.875c5.655-5.656 13.176-8.771 21.174-8.771 7.999 0 15.52 3.115 21.175 8.771l28.331 28.331-157.44 90.898h-32.468zm257.946 325.229c0 5.514-4.486 10-10 10h-104c-18.748 0-34-15.252-34-34s15.252-34 34-34h104c5.514 0 10 4.486 10 10z" /><path id="XMLID_1063_" d="m376.33 319.988c-2.63 0-5.21 1.069-7.07 2.93s-2.93 4.43-2.93 7.07c0 2.63 1.069 5.21 2.93 7.069 1.86 1.86 4.44 2.931 7.07 2.931 2.64 0 5.21-1.07 7.069-2.931 1.87-1.859 2.931-4.439 2.931-7.069s-1.061-5.21-2.931-7.07c-1.859-1.86-4.429-2.93-7.069-2.93z" /><path id="XMLID_1068_" d="m236 491.988c-2.63 0-5.21 1.069-7.07 2.93s-2.93 4.44-2.93 7.07 1.069 5.21 2.93 7.069c1.86 1.86 4.44 2.931 7.07 2.931s5.21-1.07 7.069-2.931c1.86-1.859 2.931-4.439 2.931-7.069s-1.07-5.21-2.931-7.07c-1.859-1.86-4.439-2.93-7.069-2.93z" /></g></g></svg></span>
                        <h3>My Balance</h3>
                        <h4>{{balance | number: '1.0-2'}} DIS</h4>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="create-box">
                    <div class="create-inner">
                        <span class="icon"><svg viewBox="0 0 314 314" xmlns="http://www.w3.org/2000/svg"><path d="m157 314c86.570312 0 157-70.429688 157-157s-70.429688-157-157-157-157 70.429688-157 157 70.429688 157 157 157zm0-300c78.851562 0 143 64.148438 143 143s-64.148438 143-143 143-143-64.148438-143-143 64.148438-143 143-143zm0 0" /><path d="m118.300781 142.890625c16.011719 0 28.988281-12.980469 28.988281-28.988281.003907-16.011719-12.976562-28.992188-28.988281-28.992188s-28.988281 12.980469-28.988281 28.988282c.015625 16.003906 12.984375 28.972656 28.988281 28.992187zm0-43.980469c8.277344 0 14.988281 6.710938 14.988281 14.988282.003907 8.28125-6.707031 14.992187-14.988281 14.992187-8.277343 0-14.988281-6.710937-14.988281-14.992187.007812-8.273438 6.714844-14.976563 14.988281-14.988282zm0 0" /><path d="m164.953125 201.859375c0 16.011719 12.980469 28.988281 28.988281 28.988281 16.011719 0 28.992188-12.976562 28.992188-28.988281s-12.980469-28.992187-28.992188-28.992187c-16.003906.019531-28.96875 12.988281-28.988281 28.992187zm43.980469 0c0 8.277344-6.710938 14.988281-14.992188 14.988281-8.277344 0-14.988281-6.710937-14.988281-14.988281s6.710937-14.988281 14.988281-14.992187c8.277344.011718 14.980469 6.714843 14.992188 14.992187zm0 0" /><path d="m103.699219 238.726562c3.238281 2.113282 7.578125 1.199219 9.6875-2.039062l98.953125-151.726562c1.371094-2.097657 1.519531-4.765626.390625-7-1.132813-2.234376-3.371094-3.695313-5.871094-3.828126-2.5-.132812-4.882813 1.078126-6.246094 3.179688l-98.953125 151.726562c-2.113281 3.242188-1.199218 7.578126 2.039063 9.6875zm0 0" /></svg></span>
                        <h3>Create IDO fee amount</h3>
                        <h4>{{masterFeeAmount | number: '1.0-2'}} DIS</h4>
                    </div>
                </div>
            </div>
        </div>
        <div style="text-align:center; padding: 30px 0;">
            <h2>
                We support ERC20 / BEP20 tokens.
            </h2>
            <h2 style="color:#ff0000a3; font-size: 1.5rem;">Rebase and deflationary tokens are not supported!</h2>
        </div>
        <div class="row">
            <div class="col-lg-8" style="margin: 0 auto;">
                <form #createPoolForm="ngForm" (ngSubmit)="toStep2()">
                    <div class="create-box mt-30">
                        <h2 style="text-align: center" *ngIf="step==2">
                            Confirm your IDO data
                        </h2>
                        <ul class="form-list">
                            <li>
                                Token Price ({{chainSymbol}}/Token)  <b *ngIf="step==2"> 1 {{poolSymbol}} = {{tokenPrice}} {{chainSymbol}}</b>
                                <input type="number" placeholder="Token price in {{chainSymbol}}" [(ngModel)]="tokenPrice" name="tokenPrice" class="form-control" required [disabled]="step>1" />
                            </li>
                            <li>
                                IDO Token <b>{{poolSymbol}}</b>
                                <input type="text" placeholder="Address of reward Token" [(ngModel)]="poolAddress" name="poolAddress" class="form-control" required [disabled]="step>1" autocomplete="off" />
                            </li>
                            <li>
                                Start Timestamp <span *ngIf="step>1">{{startTimestamp* 1000 | date:'dd MMM, yyyy H:mm a'}}</span>
                                <input type="number" placeholder="Start Timestamp" [(ngModel)]="startTimestamp" name="startTimestamp" class="form-control" required [disabled]="step>1" />
                            </li>
                            <li>
                                Finish Timestamp <span *ngIf="step>1">{{finishTimestamp* 1000 | date:'dd MMM, yyyy H:mm a'}}</span>
                                <input type="number" placeholder="Finish Timestamp" [(ngModel)]="finishTimestamp" name="finishTimestamp" class="form-control" required [disabled]="step>1" />
                            </li>
                            <li>
                                Start claim Timestamp <span *ngIf="step>1">{{startClaimTimestamp* 1000 | date:'dd MMM, yyyy H:mm a'}}</span>
                                <input type="number" placeholder="Start claim Timestamp" [(ngModel)]="startClaimTimestamp" name="startClaimTimestamp" class="form-control" required [disabled]="step>1" />
                            </li>

                            <li>
                                Min {{chainSymbol}} payment
                                <input type="number" placeholder="Min {{chainSymbol}} payment" [(ngModel)]="minEthPayment" name="minEthPayment" class="form-control" required [disabled]="step>1" />
                            </li>
                            <li>
                                Max {{chainSymbol}} payment
                                <input type="number" placeholder="Max {{chainSymbol}} payment" [(ngModel)]="maxEthPayment" name="maxEthPayment" class="form-control" required [disabled]="step>1" />
                            </li>

                            <li>
                                Token Supply
                                <input type="number" placeholder="Token Supply" [(ngModel)]="maxDistributedTokenAmount" name="maxDistributedTokenAmount" class="form-control" required [disabled]="step>1" />
                            </li>
                            <li>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" [(ngModel)]="hasWhitelisting" name="hasWhitelisting" id="hasWhitelisting" [disabled]="step>1">
                                    <label class="form-check-label" for="hasWhitelisting">
                                        Whitelisting {{hasWhitelisting | YesNo}}
                                    </label>
                                </div>
                                <!--Whitelisting
                                <input type="checkbox" [(ngModel)]="hasWhitelisting" name="hasWhitelisting" class="form-control" [disabled]="step>1" />-->
                            </li>
                            <!--<li>
                                Tier system
                                <input type="checkbox" [(ngModel)]="enableTierSystem" name="enableTierSystem" class="form-control" [disabled]="step>1" disabled/>
                            </li>-->
                        </ul>
                    </div>
                    <div class="approve-pool text-center" *ngIf="isApprovedBSC && step==1">
                        <!--<p>Create pool</p>-->
                        <button class="btn btn-blue" type="submit" [ngClass]="{'wait': waiting}" [disabled]="!createPoolForm.form.valid || waiting">Create pool</button>
                    </div>
                </form>
                <div *ngIf="step==2">
                    <div class="approve-pool text-center" *ngIf="!isApprovedStakingToken">
                        <!--<p>Create pool</p>-->
                        <button type="button" class="btn btn-blue" style="float:left" [ngClass]="{'wait': waiting}" (click)="toStep1()" [disabled]="waiting">Back</button>
                        <button type="button" class="btn btn-blue" [ngClass]="{'wait': waiting}" (click)="approvePoolTokenClick()" [disabled]="waiting">Approve pool token</button>
                    </div>
                    <div class="approve-pool text-center" *ngIf="isApprovedStakingToken">
                        <!--<p>Create pool</p>-->
                        <button type="button" class="btn btn-blue" style="float:left" [ngClass]="{'wait': waiting}" (click)="toStep1()" [disabled]="waiting" >Back</button>
                        <button type="button" class="btn btn-blue" [ngClass]="{'wait': waiting}" (click)="createPoolClick()" [disabled]="waiting" *ngIf="!cretedPoolAddress">Create pool</button>

                        <button type="button" class="btn btn-blue" [ngClass]="{'wait': waiting}" (click)="navigateToCreatedPool()" *ngIf="cretedPoolAddress">View IDO pool</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="approve-pool text-center" *ngIf="!isApprovedBSC&&account">
            <p>Approve Fee Token</p>
            <button class="btn btn-blue" [ngClass]="{'wait': waiting}" [disabled]="waiting" (click)="approveFeeClick()">Approve DIS</button>
        </div>
    </div>
</main>